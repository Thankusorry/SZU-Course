<center><font color="#245bdb">网络是一个极为复杂的模型</font></center>
<center>应用层
传输层
网络层
链路层
物理层</center>

# 分层体系结构 Layer
## 分层优点
- **结构化：只要该层对上层提供相同的服务，并且使用下层的相同服务，某层实现变化不会改变系统其余部分**
- 通过分层能实现更复杂，**更先进的功能**
## 协议 
**水平关系：对等层通过协议交换信息**
<u>服务+功能 == 为上层实现更复杂的功能提供更好的服务</u>
**作用：** 为了提供更好的服务
**实现：** 通过层间接口调用下层的服务
## 服务
**垂直关系：** 底层实体向上层实体提供它们之间**通信的能力**
Service user <- Service provider
- 包括所有下层向上层提供服务的总和
- 还包括对等层实体相互交流形成新的服务特性——新服务
**SAP**: Service Access Point **服务访问点 (层间接口)——服务地点** 
- 下层单个实体支撑上层多个实体，需要不同的SAP区分
	- 例如Socket编程中的端口号 port
**原语primitive**：==**服务的形式**== 告诉客户提供什么服务 
- Socket编程中的一系列函数，形式多种多样
>[!note]+ 服务和协议的区别
> **服务(Service)**：低层实体向上层实体提供它们之间的通信的能力，是通过**原语(primitive)** 来操作的，垂直 
> **协议(protocol)**：**对等层实体(peer entity)** 之间在相互通信的过程中，需要遵循的规则的集合，水平
> …………………………………………………………………………………………
>  **本层协议的实现要靠下层提供的服务来实现** 
>  **本层实体通过协议为上层提供更高级的服务**

## 数据单元 Date Unit

![[PDU.png]]
最重要的就是这个SDU通过SAP——**上层向下层提供服务数据**
**SAP+ n-header(第n层的头部)** == <font color="#ff0000">PDU 协议数据单元</font>

![[分层示意图.png]]
# 互联网协议栈
## 应用层
**网络应用：** 为人类用户或者其他应用进程提供网络应用服务
- HTTP、FTP、SMTP、DNS
## 传输层
主机之间的数据传输细化到**进程到进程之间的传输**
- **把网络不可靠的服务变成向应用层提供可靠的服务**
- TCP, UDP
## 网络层
源主机到目标主机之间**端到端的数据传输** Point to Point
- 主机主机之间的通信，端到端通信，**不可靠** 
- **IP, 路由协议**
- 解决**寻址、路由、转发**
## 链路层
**链路相邻两点之间**的数据传输
**传输以帧为单位的数据**
帧头-帧-帧尾
## 物理层
**传输帧中的一个个bit**
将上层传下来的帧Frame转换成物理信号(电磁波，电流)，通过物理媒体传播
接受方将物理信号还原为数据


# 封装和解封装
![[封装和解封装.png]]
应用层：**报文 message**
↓加入Ht：能够判断报文中的bit是否在途中被改变
传输层: **报文段 segment**
↓TCP段，UDP数据
网络层：**分组：packet** 如果**无连接**方式才叫：**Datagram数据包**
↓
链路层：**帧 Frame**
↓
物理层：bit