局域网属于链路层：
	网络层：分组从一个网络到另一个网络
	链路层：分组从一个主机到另一个主机
# 介质/媒体访问控制
## **信道划分（静态划分）**
**特点：不会发生冲突**
分为：
1. 时分多路复用——时间间隔
2. 频分多路复用——频带划分
![[信道划分.png]]
## **随机访问（动态划分）**
**特点： 提高利用率，但会发生冲突**
以太网使用的是==**CSMA/CD——适用于总线型**==
**==流程==** 分为：
1. **==先听后发==**： 监听总线是否在忙，如果忙，就等待
2. **==边听边发==**： 一边发送一边监听，检查是否冲突
   原因：在数据传输带来的电平波动需要时间，另一个主机监听它的起始段时会认为信道空闲
   ![[单向传播时延.png|650]]
3. **==冲突停止==**：一旦发生冲突，立即停止发送——意味着两个帧都将丢弃
4. ==**延迟重发**==：超过16次冲突，帧会无条件丢掉，如果小于十六次，计算延迟重发时间并等待
### 考点1：计算延迟重发时间
定义： ==**τ 表示单向端到端传播时延**==
==**2τ：往返传播时延(RTT)**==，最坏情况，保证2τ后能收到数据是否传输成功
	因此2τ被称为“冲突窗口”
τ取决于**物理介质的长度（L）​**​ 和 ​**信号传播速度（v）**
==**最小帧长**==：保证发生冲突时第二个帧还未完整发出——==**最大τ的空间具象化**==
	==**计算=最小帧大小/链路速率 >=2τ**==
**以太网所容许的最小帧= 64KB 512bit**
延迟重发时间计算：
1. 基本退避时间(基数)=**2τ**
2. 随机数： **k=min[冲突次数，10]，在(0,1,2,3,4,...,$2^k-1$)中随机一个数** 
3. **==延迟重发时间 = 2τ * 随机数**==

>[!help]+ **区分链路速率和物理速率**
> 链路速率 = 数据率 = 链路传输数据速率 -> 传输时延
> 物理速率 = 信号传播速率 ，常见 20000km/s
> **因此，最小帧长 / 链路速率 == 2 * 物理长度 / 物理速率 (2τ)**

#### **练习1：随机数范围**
在以太网的二进制回退算法中，在11次碰撞之后，站点会在0~__ 之间选择 一个随机数
- **K=min(11,10)=10,所以0~1023**
#### **练习2：τ的最大值**
假设一个采用CSMA/CD协议的**100 Mb/s局域网**，**最小帧长是128B**, 则在一个冲突域内两个站点之间的单向传播延时最多是
- 2τ <= 128×8/100=10.24μs —— **τ<= 5.12μs**
# 以太网
**以太网是局域网的一种实现方式**
以太网中，是**根据物理地址地址来区分不同的设备的**
==**以太网地址 == 网卡地址 == MAC地址 == 物理地址 == 硬件地址 ——48位 6个字节**==
网络设备的地址长度：
1. IPv4地址长度是（ 4 ）字节
2. **IPv6地址长度是（ 16 ） 字节**
3. **物理地址的长度是（ 6 ）字节**
# 网桥
**链路层互联设备**
作用：==**能将异种网络互联起来，实现不同网络协议相互转换**==
# 易错点
==**如果A在发送完毕之前并没有检测到碰撞，那么能肯定A发送的帧不会和B发送的帧碰撞**==
	也就是说，碰撞仅可能发生在A开始发送~发送的第一个帧没有到达B之前
	一旦到达B，B会监听到信道在忙，不会发送数据

==**传输和传播**==： 一遍传输，一遍传播，最后一次传输完一定会最后一次传播

