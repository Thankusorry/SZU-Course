<center><font color="#00b0f0">DNS是实现互联网应用层协议的基础</font></center>
![[隐含的DNS服务.png|700]]
# 基本概念
标识主机的两种方式：主机名 or IP地址
**域名 Domain name**: baidu.com
**主机名 hostname: 服务器名+域名——给人看的** 
	www.baidu.com 更方便记忆，但是提供的信息很少
**IP地址**：**路由器需要的**
	192.128.31.21 层次结构，从左往右，关于主机的信息越具体
**DNS: Domain Name System 域名系统**
# DNS提供的服务
将主机名转换为IP地址
为提供这个服务，**DNS需要解决的问题：**
**问题1：名字空间——如何命名设备**
- 用有意义的字符串：**好记**，便于人类用使用
- 解决一个平面命名的**重名问题**：层次化命名
**问题2：名字解析——如何完成名字到IP地址的转换**
- 分布式的数据库维护和响应名字查询
**问题3：如何维护**
- 增加或者删除一个域，需要在域名系统中做哪些工作
## DNS历史
### **ARPANET：**
当时主机较少，用一个平面命名所有主机
用一个集中服务器维护一张主机名-IP地址的映射文件
无法满足大量的主机名，维护成本太高
## **DNS的总体思路和目标**
**主要思路**：
- **分层**的、基于**域**的命名机制
- 若干**分布式的数据库**完成名字到IP地址的转换
- 运行在**UDP上端口号为53**
- **互联网的核心功能，但==以应用层协议实现==**
	- 在网络边缘，通过端系统上的应用进程实现
**主要目的：**
**实现主机名-IP地址的转换**
- 其他目的：**==？==**
	1. 主机别名到**规范名字**的转换：Host aliasing
	2. 邮件服务器别名到**邮件服务器的正规名字**的转换：Mail server aliasing
	3. **负载均衡**：Load Distribution
## 问题1：DNS名字空间(The DNS Name Space)
**==DNS域名结构：层次树状结构==**
**根名字服务器**——**根被划为几百个顶级域名(generic/countries)，每个(子)域下面可划分为若干子域**
<u>中国没有根服务器</u>

![[树状结构.png]]
**一级(顶级）域名→二级域名→三级域名→四级域名**
**域名：从本域往上，直到树根，中间用.分割** 
	www.szu.edu.cn
**域的域名**：可以用于表示一个**逻辑上的网络范围——中间节点** ，**==一个域管理其下的子域==**
- baidu.com
**主机的域名：一个域上的一个主机——叶子节点**
- www.baidu.com Web服务器上的完整域名
- mail.baidu.com Mail服务器上
**==域的划分是逻辑的，而不是物理的==**
## 问题2：解析问题-名字服务器(Name Server)
**只依靠一个名字服务器**
1. 可靠性问题：出现故障
2. 扩展性问题：通信容量
3. 维护问题：远距离的集中式数据库——维护和解析麻烦
### **DNS解决方案**
将DNS名字空间划分为**互不相交的区域Zone**，每个区域都是树的一部分
每个zone有一个权威名字服务器，维护区域的权威信息(authoritative record)
![[Zone.png|575]]
**上层的服务器要知道下层的信息，以便从下往上找**
顶级域服务器 TLD

# DNS 工作原理
![[DNS工作原理.png]]
## 域名解析算法
**复制：** 每个根目录被复制，该服务器副本存放在整个网络上。当一个新的网络加入互联网时，**在本地的DNS服务器中配置一个根服务器表**
**缓存：使用高速缓存优化查询开销**。每个服务器都保留了一个域名缓存，查询一个新的域名时，服务器将该绑定的一个副本置于它的缓存中

### **递归解析**
![[递归解析.png]]
### **迭代解析**
![[迭代解析.png]]
# 练习
1. 互联网中域名解析依赖于由域名服务器组成的逻辑树。在域名解析过程中，主机上请求域名解析的软件不需要知道（        ）信息。
I. 本地域名服务器的IP
II. 本地域名服务器父结点的IP
III. 域名服务器树根结点的IP
A.  I和II			
B.  I和III			
**C.  II和III**			
D.  I、II、III

2. 在DNS的递归查询中，由（      ）给客户端返回地址。
**A.最开始连接的服务器**	
B.最后连接的服务器	
C.目的地址所在服务器	
D.不确定

3. 若本地域名服务器无缓存，则在采用**递归方法解析**另一网络某主机域名时，用户主机和本地域名服务器发送的域名请求条数分别为（       ）。
**A.1条，1条**		
B. 1条，多条		
C. 多条，1条		
D. 多条，多条

4. 一台主机要解析www.cskaoyan.com的IP地址，如果这台**主机配置的域名服务器为202.120.66.68**，因特网顶级域名服务器为11.2.8.6，而存储www.cskaoyan.com的IP地址对应关系的域名服务器为202.113.16.10，那么这台主机解析该域名通常首先查询（        ）。
**A. 202.120.66.68域名服务器**				
B. 11.2.8.6.域名服务器
C. 202.113.16.10域名服务器				
D. 可以从这3个域名服务器中任选一个

5.  假设所有域名服务器均采用**迭代查询方式**进行域名解析。当主机访问规范域名为www.abc.xyz.com的网站时，本地域名服务器在完成该域名解析的过程中，可能发出DNS查询的最少和最多次数分别是（      ）。
A. 0，3			
B. 1，3			
**C. 0，4**			
D. 1，4
6. 域名与（       ）具有一一对应的关系。
A. IP地址			
B. MAC地址		
C. 主机			
**D. 以上都不是**
7. DNS是基于（      ）模式的分布式系统。
**A. C/S**			
B. B/S			
C. P2P			
D.以上都不是
8. 下列TCP/IP应用层议中，可以使用传输层无连接服务的是（      ）。
A. FTP			
**B. DNS**			
C. SMTP			
D. HTTP
