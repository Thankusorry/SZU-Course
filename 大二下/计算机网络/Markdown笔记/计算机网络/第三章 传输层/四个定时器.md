# 四个定时器总结
## 保持(保活)定时器
==**触发条件**==：每当 **==服务器端==** 收到客户端的数据时，都将保活计时器重新设置
==**目的：主要是为了防止两个TCP连接出现长时间的空闲**==
==**场景**==：当客户端与服务器端建立TCP连接后，很长时间内**客户端都没有向服务器端发送数据**，此时很有可能是客户端出现故障，而服务器端会一直处于等待状态

**保持定时器是服务器发起的，时间等待计时器是客户端发起的**
## 时间等待计时器
**四次挥手中==客户端==发送ACK后启动等待两倍的MSL的计时器** 
## 重传定时器
**只要是发送报文，都会触发重传计时器**
**==目的：控制报文确认和等待重传的时间==**
- 根据网络RTT的新旧状况动态调整
## 坚持定时器
**Persist timer 用于流量控制中的发送方发送探测窗口获得接收方的接收窗口**
==**背景：纯ACK报文段(数据长度=0, ACK=1的报文段)不被TCP可靠递送**==——不需要回复(确认)
**==目的：防止接收方窗口为零时，窗口更新丢失，发送方和接收方都处于等待的死锁状态。==**
==**触发条件**==：**当发送方收到 `rwnd=0` 的ACK，且仍有数据需要发送时，启动坚持定时器**

**死锁状态：如果窗口更新报文丢失，双方都陷入阻塞**
- **发送方：收到零窗口后，持续等待窗口更新，不会发送新数据**
- **接收方：持续等待新数据（因为已发送窗口更新，但未收到数据）**