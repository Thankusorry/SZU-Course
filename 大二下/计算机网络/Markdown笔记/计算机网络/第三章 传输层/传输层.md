**根本目的**：在网络层提供的数据通信服务基础上，实现主机==**进程间可靠**==服务，实现 **==“端到端”==** 服务
## 传输层和网络层的关系
主机-主机(网络层) → 端-端(传输层)
**端到端：本质上就是进程到进程**
一个主机包含很多进程
1. **==传输层协议只工作在端系统中，不在于网络层是如何实现的，相对应的，网络层也不关心传输层附加的信息==**
	- **路由器不会识别和处理传输层在报文中的任何信息**
2. **传输层提供的服务受限于网络层协议的服务模型，==特殊之处在于即使网络层协议不能在网络层提供相应的服务，传输层协议也能提供某些服务==**
   - 网络层中的分组丢失、篡改等，传输层也能提供可靠服务
   - **UDP”不可靠”是相比TCP的“可靠”，传输层的"可靠"相比于网络层的不可靠**
**传输单元是 ==TCP：报文段segment UDP：数据报 Datagram==**
![[报文段.png|475]]
### **传输层为报文提供的服务**
**==最低限度的传输层服务（对应UDP仅有的两个服务）==**
1. 进程到进程的**数据交付**
2. **==差错检验==**
3. **==复用/分解==**

## 应用进程标识
**==进程标识三元组==**：协议、本地地址、本地端口——也叫半相关；**对应Socket**
==**进程通信标识五元组**==：协议、本地地址、本地端口、远程地址、远程端口号，也叫全相关
	接收方协议和发送方一致，不需要重复标识
### **端口号分配**
![[1.png]]
==**熟知端口号**==：给每种服务器分配的确定的全局端口号，也叫公认端口号，范围在0~1023，统一分配与控制
	Web tcp 80  smtp tcp 25 ftp tcp 20/21  dns udp 53
==**注册端口号**==：在IANA注册的端口号，没有明确的定义服务对象，不同程序可根据实际需要自己定义，范围在1024~49152
==**临时端口号**==：**客户端程序使用的临时端口号**，由客户端上TCP/IP软件随机选取，范围在49152~==**65535**==

![[熟知端口号.png]]
## 多路复用和解复用
**多路复用 Multiplexing**
**多路分解 Demultiplexing**
运行TCP/IP协议主机可能同时运行不同应用层协议和应用程序
![[多路复用.png]]

## 传输层协议对比
**TCP vs UDP**
![[TCP vs UDP.png]]

**==记忆点：==**
1. **==可靠角度==**：TCP可靠数据传输(reliable data transfer),UDP不可靠
2. ==**连接角度**==：TCP面向连接(传输数据前先建立连接)，UDP无连接
3. ==**数据角度**==：TCP面向字节流，UDP面向报文
4. ==**服务角度**==：TCP提供重传机制，流量控制，拥塞控制，UDP没有
5. ==**开销和速率角度**==：TCP开销大速度慢，UDP开销小速度快

**为什么UDP开销更低**：
**==空间开销==**：数据封装头部更简单，代价更低 8B，对应tcp 20-60 B
**协议设置的本质是因为信道的不理想——存在干扰** 
**因此，需要对数据进行封装，这就是overhead 代价**

**==时间开销==**：TCP连接过程


